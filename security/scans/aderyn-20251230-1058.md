# Aderyn Analysis Report

This report was generated by [Aderyn](https://github.com/Cyfrin/aderyn), a static analysis tool built by [Cyfrin](https://cyfrin.io), a blockchain security company. This report is not a substitute for manual audit or security review. It should not be relied upon for any purpose other than to assist in the identification of potential security vulnerabilities.

# Table of Contents

- [Summary](#summary)
  - [Files Summary](#files-summary)
  - [Files Details](#files-details)
  - [Issue Summary](#issue-summary)
- [High Issues](#high-issues)
  - [H-1: Arbitrary `from` passed to `transferFrom` (or `safeTransferFrom`)](#h-1-arbitrary-from-passed-to-transferfrom-or-safetransferfrom)
  - [H-2: Unprotected initializer](#h-2-unprotected-initializer)
  - [H-3: Unsafe Casting](#h-3-unsafe-casting)
  - [H-4: Uninitialized State Variables](#h-4-uninitialized-state-variables)
  - [H-5: Yul block contains `return` function call.](#h-5-yul-block-contains-return-function-call)
  - [H-6: Sending native Eth is not protected from these functions.](#h-6-sending-native-eth-is-not-protected-from-these-functions)
  - [H-7: Delegatecall made by the function without checks on any adress.](#h-7-delegatecall-made-by-the-function-without-checks-on-any-adress)
  - [H-8: Return value of the function call is not checked.](#h-8-return-value-of-the-function-call-is-not-checked)
  - [H-9: Weak Randomness](#h-9-weak-randomness)
  - [H-10: Contract locks Ether without a withdraw function.](#h-10-contract-locks-ether-without-a-withdraw-function)
- [Low Issues](#low-issues)
  - [L-1: Centralization Risk for trusted owners](#l-1-centralization-risk-for-trusted-owners)
  - [L-2: Solidity pragma should be specific, not wide](#l-2-solidity-pragma-should-be-specific-not-wide)
  - [L-3: `public` functions not used internally could be marked `external`](#l-3-public-functions-not-used-internally-could-be-marked-external)
  - [L-4: Define and use `constant` variables instead of using literals](#l-4-define-and-use-constant-variables-instead-of-using-literals)
  - [L-5: Event is missing `indexed` fields](#l-5-event-is-missing-indexed-fields)
  - [L-6: The `nonReentrant` `modifier` should occur before all other modifiers](#l-6-the-nonreentrant-modifier-should-occur-before-all-other-modifiers)
  - [L-7: PUSH0 is not supported by all chains](#l-7-push0-is-not-supported-by-all-chains)
  - [L-8: Modifiers invoked only once can be shoe-horned into the function](#l-8-modifiers-invoked-only-once-can-be-shoe-horned-into-the-function)
  - [L-9: Empty Block](#l-9-empty-block)
  - [L-10: Large literal values multiples of 10000 can be replaced with scientific notation](#l-10-large-literal-values-multiples-of-10000-can-be-replaced-with-scientific-notation)
  - [L-11: Internal functions called only once can be inlined](#l-11-internal-functions-called-only-once-can-be-inlined)
  - [L-12: Inconsistency in declaring uint256/uint (or) int256/int variables within a contract. Use explicit size declarations (uint256 or int256).](#l-12-inconsistency-in-declaring-uint256uint-or-int256int-variables-within-a-contract-use-explicit-size-declarations-uint256-or-int256)
  - [L-13: Unused Custom Error](#l-13-unused-custom-error)

# Summary

## Files Summary

| Key         | Value |
| ----------- | ----- |
| .sol Files  | 25    |
| Total nSLOC | 3959  |

## Files Details

| Filepath                                      | nSLOC    |
| --------------------------------------------- | -------- |
| src/Counter.sol                               | 10       |
| src/integrations/base/BaseMezoIntegration.sol | 280      |
| src/integrations/base/PriceValidator.sol      | 87       |
| src/integrations/v3/MezoIntegrationV3.sol     | 169      |
| src/integrations/v3/YieldAggregatorV3.sol     | 429      |
| src/interfaces/IMezoBorrowerOperations.sol    | 64       |
| src/interfaces/IMezoHintHelpers.sol           | 75       |
| src/interfaces/IMezoIntegration.sol           | 14       |
| src/interfaces/IMezoPriceFeed.sol             | 55       |
| src/interfaces/IMezoSortedTroves.sol          | 47       |
| src/interfaces/IMezoStabilityPool.sol         | 23       |
| src/interfaces/IMezoTroveManager.sol          | 88       |
| src/interfaces/IStabilityPoolStrategy.sol     | 37       |
| src/interfaces/IYieldAggregator.sol           | 118      |
| src/libraries/Errors.sol                      | 41       |
| src/libraries/Events.sol                      | 131      |
| src/libraries/YieldCalculations.sol           | 111      |
| src/pools/v3/BasePoolV3.sol                   | 99       |
| src/pools/v3/CooperativePoolV3.sol            | 415      |
| src/pools/v3/IndividualPoolV3.sol             | 342      |
| src/pools/v3/LotteryPoolV3.sol                | 421      |
| src/pools/v3/RotatingPool.sol                 | 494      |
| src/proxy/SimpleProxy.sol                     | 51       |
| src/proxy/UUPSProxy.sol                       | 80       |
| src/strategies/StabilityPoolStrategy.sol      | 278      |
| **Total**                                     | **3959** |

## Issue Summary

| Category | No. of Issues |
| -------- | ------------- |
| High     | 10            |
| Low      | 13            |

# High Issues

## H-1: Arbitrary `from` passed to `transferFrom` (or `safeTransferFrom`)

Passing an arbitrary `from` address to `transferFrom` (or `safeTransferFrom`) can lead to loss of funds, because anyone can transfer tokens from the `from` address if an approval is made.

<details><summary>1 Found Instances</summary>

- Found in src/integrations/v3/YieldAggregatorV3.sol [Line: 468](../../packages/contracts/src/integrations/v3/YieldAggregatorV3.sol#L468)

  ```solidity
          MUSD_TOKEN.safeTransferFrom(user, address(this), amount);
  ```

</details>

## H-2: Unprotected initializer

Consider protecting the initializer functions with modifiers.

<details><summary>1 Found Instances</summary>

- Found in src/pools/v3/RotatingPool.sol [Line: 709](../../packages/contracts/src/pools/v3/RotatingPool.sol#L709)

  ```solidity
      function _initializePeriod(uint256 poolId, uint256 periodNumber) internal {
  ```

</details>

## H-3: Unsafe Casting

Downcasting int/uints in Solidity can be unsafe due to the potential for data loss and unintended behavior.When downcasting a larger integer type to a smaller one (e.g., uint256 to uint128), the value may exceed the range of the target type,leading to truncation and loss of significant digits. Use OpenZeppelin's SafeCast library to safely downcast integers.

<details><summary>6 Found Instances</summary>

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 205](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L205)

  ```solidity
              stalenessThreshold: uint32(DEFAULT_STALENESS),
  ```

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 206](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L206)

  ```solidity
              maxDeviationBps: uint16(DEFAULT_MAX_DEVIATION),
  ```

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 482](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L482)

  ```solidity
              stalenessThreshold: uint32(staleness),
  ```

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 483](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L483)

  ```solidity
              maxDeviationBps: uint16(maxDeviation),
  ```

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 332](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L332)

  ```solidity
          participant.musdContributed += uint128(musdAmount);
  ```

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 334](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L334)

  ```solidity
          round.totalMusd += uint128(musdAmount);
  ```

</details>

## H-4: Uninitialized State Variables

Solidity does initialize variables by default when you declare them, however it's good practice to explicitly declare an initial value. For example, if you transfer money to an address we must make sure that the address has been initialized.

<details><summary>4 Found Instances</summary>

- Found in src/integrations/v3/YieldAggregatorV3.sol [Line: 73](../../packages/contracts/src/integrations/v3/YieldAggregatorV3.sol#L73)

  ```solidity
      uint256 public totalYieldGenerated;
  ```

- Found in src/pools/v3/CooperativePoolV3.sol [Line: 84](../../packages/contracts/src/pools/v3/CooperativePoolV3.sol#L84)

  ```solidity
      uint256 public poolCounter;
  ```

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 89](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L89)

  ```solidity
      uint256 public currentRoundId;
  ```

- Found in src/pools/v3/RotatingPool.sol [Line: 120](../../packages/contracts/src/pools/v3/RotatingPool.sol#L120)

  ```solidity
      uint256 public poolCounter;
  ```

</details>

## H-5: Yul block contains `return` function call.

Remove this, as this causes execution to halt. Nothing after that call will execute, including code following the assembly block.

<details><summary>2 Found Instances</summary>

- Found in src/proxy/SimpleProxy.sol [Line: 75](../../packages/contracts/src/proxy/SimpleProxy.sol#L75)

  ```solidity
              default { return(0, returndatasize()) }
  ```

- Found in src/proxy/UUPSProxy.sol [Line: 138](../../packages/contracts/src/proxy/UUPSProxy.sol#L138)

  ```solidity
                  return(0, returndatasize())
  ```

</details>

## H-6: Sending native Eth is not protected from these functions.

Introduce checks for `msg.sender` in the function

<details><summary>4 Found Instances</summary>

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 200](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L200)

  ```solidity
      function depositMUSD(uint256 _amount)
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 251](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L251)

  ```solidity
      function withdrawMUSD(uint256 _amount)
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 296](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L296)

  ```solidity
      function claimCollateralGains()
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 316](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L316)

  ```solidity
      function harvestCollateralGains()
  ```

</details>

## H-7: Delegatecall made by the function without checks on any adress.

Introduce checks on the address

<details><summary>1 Found Instances</summary>

- Found in src/proxy/UUPSProxy.sol [Line: 44](../../packages/contracts/src/proxy/UUPSProxy.sol#L44)

  ```solidity
      constructor(address _implementation, bytes memory _data) payable {
  ```

</details>

## H-8: Return value of the function call is not checked.

Function returns a value but it is ignored.

<details><summary>8 Found Instances</summary>

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 263](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L263)

  ```solidity
              PriceValidator.validateDeviation(price, lastKnownPrice, _getMaxDeviation());
  ```

- Found in src/integrations/base/PriceValidator.sol [Line: 113](../../packages/contracts/src/integrations/base/PriceValidator.sol#L113)

  ```solidity
          validateDeviation(price, referencePrice, maxDeviationBps);
  ```

- Found in src/pools/v3/IndividualPoolV3.sol [Line: 269](../../packages/contracts/src/pools/v3/IndividualPoolV3.sol#L269)

  ```solidity
          YIELD_AGGREGATOR.deposit(netDeposit);
  ```

- Found in src/pools/v3/IndividualPoolV3.sol [Line: 383](../../packages/contracts/src/pools/v3/IndividualPoolV3.sol#L383)

  ```solidity
              YIELD_AGGREGATOR.claimYield();
  ```

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 549](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L549)

  ```solidity
          YIELD_AGGREGATOR.deposit(amount);
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 210](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L210)

  ```solidity
          _harvestCollateralGains();
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 266](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L266)

  ```solidity
          _claimCollateralGains(msg.sender);
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 524](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L524)

  ```solidity
          _harvestCollateralGains();
  ```

</details>

## H-9: Weak Randomness

The use of keccak256 hash functions on predictable values like block.timestamp, block.number, or similar data, including modulo operations on these values, should be avoided for generating randomness, as they are easily predictable and manipulable. The `PREVRANDAO` opcode also should not be used as a source of randomness. Instead, utilize Chainlink VRF for cryptographically secure and provably random values to ensure protocol integrity.

<details><summary>2 Found Instances</summary>

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 714](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L714)

  ```solidity
          fallbackSeed = uint256(keccak256(abi.encodePacked(
  ```

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 718](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L718)

  ```solidity
              block.prevrandao,  // EIP-4399: Use prevrandao for additional entropy
  ```

</details>

## H-10: Contract locks Ether without a withdraw function.

It appears that the contract includes a payable function to accept Ether but lacks a corresponding function to withdraw it, which leads to the Ether being locked in the contract. To resolve this issue, please implement a public or external function that allows for the withdrawal of Ether from the contract.

<details><summary>2 Found Instances</summary>

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 32](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L32)

  ```solidity
  abstract contract BaseMezoIntegration is
  ```

- Found in src/proxy/UUPSProxy.sol [Line: 16](../../packages/contracts/src/proxy/UUPSProxy.sol#L16)

  ```solidity
  contract UUPSProxy {
  ```

</details>

# Low Issues

## L-1: Centralization Risk for trusted owners

Contracts have owners with privileged rights to perform admin tasks and need to be trusted to not perform malicious updates or drain funds.

<details><summary>43 Found Instances</summary>

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 443](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L443)

  ```solidity
      function setEmergencyMode(bool _enabled) external onlyOwner {
  ```

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 452](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L452)

  ```solidity
      function setTargetLtv(uint256 newLtv) external onlyOwner {
  ```

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 463](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L463)

  ```solidity
      function setMaxFeePercentage(uint256 newFee) external onlyOwner {
  ```

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 478](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L478)

  ```solidity
      ) external onlyOwner {
  ```

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 492](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L492)

  ```solidity
      function pause() external onlyOwner {
  ```

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 499](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L499)

  ```solidity
      function unpause() external onlyOwner {
  ```

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 511](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L511)

  ```solidity
      function _authorizeUpgrade(address newImplementation) internal override onlyOwner {
  ```

- Found in src/integrations/v3/YieldAggregatorV3.sol [Line: 538](../../packages/contracts/src/integrations/v3/YieldAggregatorV3.sol#L538)

  ```solidity
      function setAuthorizedCaller(address caller, bool authorized) external onlyOwner {
  ```

- Found in src/integrations/v3/YieldAggregatorV3.sol [Line: 546](../../packages/contracts/src/integrations/v3/YieldAggregatorV3.sol#L546)

  ```solidity
      ) external onlyOwner {
  ```

- Found in src/integrations/v3/YieldAggregatorV3.sol [Line: 567](../../packages/contracts/src/integrations/v3/YieldAggregatorV3.sol#L567)

  ```solidity
      function updateVaultApr(address vaultAddress, uint256 newApr) external onlyOwner {
  ```

- Found in src/integrations/v3/YieldAggregatorV3.sol [Line: 576](../../packages/contracts/src/integrations/v3/YieldAggregatorV3.sol#L576)

  ```solidity
      function setVaultActive(address vaultAddress, bool active) external onlyOwner {
  ```

- Found in src/integrations/v3/YieldAggregatorV3.sol [Line: 585](../../packages/contracts/src/integrations/v3/YieldAggregatorV3.sol#L585)

  ```solidity
      function setEmergencyMode(bool _enabled) external onlyOwner {
  ```

- Found in src/integrations/v3/YieldAggregatorV3.sol [Line: 590](../../packages/contracts/src/integrations/v3/YieldAggregatorV3.sol#L590)

  ```solidity
      function emergencyWithdrawFromVault(address vaultAddress) external override onlyOwner {
  ```

- Found in src/integrations/v3/YieldAggregatorV3.sol [Line: 599](../../packages/contracts/src/integrations/v3/YieldAggregatorV3.sol#L599)

  ```solidity
      function pauseDeposits() external override onlyOwner {
  ```

- Found in src/integrations/v3/YieldAggregatorV3.sol [Line: 603](../../packages/contracts/src/integrations/v3/YieldAggregatorV3.sol#L603)

  ```solidity
      function resumeDeposits() external override onlyOwner {
  ```

- Found in src/integrations/v3/YieldAggregatorV3.sol [Line: 607](../../packages/contracts/src/integrations/v3/YieldAggregatorV3.sol#L607)

  ```solidity
      function pause() external onlyOwner {
  ```

- Found in src/integrations/v3/YieldAggregatorV3.sol [Line: 611](../../packages/contracts/src/integrations/v3/YieldAggregatorV3.sol#L611)

  ```solidity
      function unpause() external onlyOwner {
  ```

- Found in src/integrations/v3/YieldAggregatorV3.sol [Line: 619](../../packages/contracts/src/integrations/v3/YieldAggregatorV3.sol#L619)

  ```solidity
      function _authorizeUpgrade(address newImplementation) internal override onlyOwner {}
  ```

- Found in src/pools/v3/BasePoolV3.sol [Line: 134](../../packages/contracts/src/pools/v3/BasePoolV3.sol#L134)

  ```solidity
      function setPerformanceFee(uint256 newFee) external onlyOwner {
  ```

- Found in src/pools/v3/BasePoolV3.sol [Line: 145](../../packages/contracts/src/pools/v3/BasePoolV3.sol#L145)

  ```solidity
      function setFeeCollector(address newCollector) external onlyOwner {
  ```

- Found in src/pools/v3/BasePoolV3.sol [Line: 156](../../packages/contracts/src/pools/v3/BasePoolV3.sol#L156)

  ```solidity
      function setEmergencyMode(bool _enabled) external onlyOwner {
  ```

- Found in src/pools/v3/BasePoolV3.sol [Line: 164](../../packages/contracts/src/pools/v3/BasePoolV3.sol#L164)

  ```solidity
      function pause() external onlyOwner {
  ```

- Found in src/pools/v3/BasePoolV3.sol [Line: 171](../../packages/contracts/src/pools/v3/BasePoolV3.sol#L171)

  ```solidity
      function unpause() external onlyOwner {
  ```

- Found in src/pools/v3/BasePoolV3.sol [Line: 204](../../packages/contracts/src/pools/v3/BasePoolV3.sol#L204)

  ```solidity
      function _authorizeUpgrade(address newImplementation) internal override onlyOwner {
  ```

- Found in src/pools/v3/IndividualPoolV3.sol [Line: 574](../../packages/contracts/src/pools/v3/IndividualPoolV3.sol#L574)

  ```solidity
      function setReferralBonus(uint256 newBonus) external onlyOwner {
  ```

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 250](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L250)

  ```solidity
      ) external onlyOwner whenNotPaused returns (uint256 roundId) {
  ```

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 649](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L649)

  ```solidity
          onlyOwner
  ```

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 669](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L669)

  ```solidity
      function setOperator(address newOperator) external onlyOwner {
  ```

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 688](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L688)

  ```solidity
      function forceComplete(uint256 roundId) external onlyOwner nonReentrant {
  ```

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 735](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L735)

  ```solidity
      function emergencyWithdraw() external onlyOwner {
  ```

- Found in src/pools/v3/RotatingPool.sol [Line: 37](../../packages/contracts/src/pools/v3/RotatingPool.sol#L37)

  ```solidity
  contract RotatingPool is Ownable, ReentrancyGuard, Pausable {
  ```

- Found in src/pools/v3/RotatingPool.sol [Line: 819](../../packages/contracts/src/pools/v3/RotatingPool.sol#L819)

  ```solidity
      function setPerformanceFee(uint256 newFee) external onlyOwner {
  ```

- Found in src/pools/v3/RotatingPool.sol [Line: 827](../../packages/contracts/src/pools/v3/RotatingPool.sol#L827)

  ```solidity
      function setFeeCollector(address newCollector) external onlyOwner {
  ```

- Found in src/pools/v3/RotatingPool.sol [Line: 837](../../packages/contracts/src/pools/v3/RotatingPool.sol#L837)

  ```solidity
          onlyOwner
  ```

- Found in src/pools/v3/RotatingPool.sol [Line: 850](../../packages/contracts/src/pools/v3/RotatingPool.sol#L850)

  ```solidity
      function pause() external onlyOwner {
  ```

- Found in src/pools/v3/RotatingPool.sol [Line: 857](../../packages/contracts/src/pools/v3/RotatingPool.sol#L857)

  ```solidity
      function unpause() external onlyOwner {
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 42](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L42)

  ```solidity
  contract StabilityPoolStrategy is Ownable, ReentrancyGuard, Pausable {
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 332](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L332)

  ```solidity
          onlyOwner
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 561](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L561)

  ```solidity
      function setPerformanceFee(uint256 _newFee) external onlyOwner {
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 572](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L572)

  ```solidity
      function setFeeCollector(address _newCollector) external onlyOwner {
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 583](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L583)

  ```solidity
      function toggleEmergencyMode(bool _enabled) external onlyOwner {
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 591](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L591)

  ```solidity
      function pause() external onlyOwner {
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 598](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L598)

  ```solidity
      function unpause() external onlyOwner {
  ```

</details>

## L-2: Solidity pragma should be specific, not wide

Consider using a specific version of Solidity in your contracts instead of a wide version. For example, instead of `pragma solidity ^0.8.0;`, use `pragma solidity 0.8.0;`

<details><summary>1 Found Instances</summary>

- Found in src/Counter.sol [Line: 2](../../packages/contracts/src/Counter.sol#L2)

  ```solidity
  pragma solidity ^0.8.13;
  ```

</details>

## L-3: `public` functions not used internally could be marked `external`

Instead of marking a function as `public`, consider marking it as `external` if it is not used internally.

<details><summary>6 Found Instances</summary>

- Found in src/Counter.sol [Line: 7](../../packages/contracts/src/Counter.sol#L7)

  ```solidity
      function setNumber(uint256 newNumber) public {
  ```

- Found in src/Counter.sol [Line: 11](../../packages/contracts/src/Counter.sol#L11)

  ```solidity
      function increment() public {
  ```

- Found in src/integrations/v3/MezoIntegrationV3.sol [Line: 45](../../packages/contracts/src/integrations/v3/MezoIntegrationV3.sol#L45)

  ```solidity
      function initialize(
  ```

- Found in src/integrations/v3/YieldAggregatorV3.sol [Line: 116](../../packages/contracts/src/integrations/v3/YieldAggregatorV3.sol#L116)

  ```solidity
      function initialize(address _musdToken) public initializer {
  ```

- Found in src/pools/v3/CooperativePoolV3.sol [Line: 187](../../packages/contracts/src/pools/v3/CooperativePoolV3.sol#L187)

  ```solidity
      function initialize(
  ```

- Found in src/pools/v3/IndividualPoolV3.sol [Line: 178](../../packages/contracts/src/pools/v3/IndividualPoolV3.sol#L178)

  ```solidity
      function initialize(
  ```

</details>

## L-4: Define and use `constant` variables instead of using literals

If the same constant literal value is used multiple times, create a constant state variable and reference it throughout the contract.

<details><summary>17 Found Instances</summary>

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 203](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L203)

  ```solidity
              minPrice: uint64(DEFAULT_MIN_PRICE / 1e15),  // Scale down for storage
  ```

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 204](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L204)

  ```solidity
              maxPrice: uint64(DEFAULT_MAX_PRICE / 1e15),
  ```

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 371](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L371)

  ```solidity
          return uint256(priceConfig.minPrice) * 1e15;  // Scale back up
  ```

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 375](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L375)

  ```solidity
          return uint256(priceConfig.maxPrice) * 1e15;
  ```

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 480](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L480)

  ```solidity
              minPrice: uint64(minPrice / 1e15),
  ```

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 481](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L481)

  ```solidity
              maxPrice: uint64(maxPrice / 1e15),
  ```

- Found in src/integrations/base/PriceValidator.sol [Line: 147](../../packages/contracts/src/integrations/base/PriceValidator.sol#L147)

  ```solidity
          value = (amount * price) / 1e18;
  ```

- Found in src/integrations/base/PriceValidator.sol [Line: 161](../../packages/contracts/src/integrations/base/PriceValidator.sol#L161)

  ```solidity
          amount = (value * 1e18) / price;
  ```

- Found in src/integrations/v3/YieldAggregatorV3.sol [Line: 428](../../packages/contracts/src/integrations/v3/YieldAggregatorV3.sol#L428)

  ```solidity
          expectedYield = (amount * uint256(vault.apr) * timeInSeconds) / (10000 * 365 days);
  ```

- Found in src/integrations/v3/YieldAggregatorV3.sol [Line: 529](../../packages/contracts/src/integrations/v3/YieldAggregatorV3.sol#L529)

  ```solidity
          pendingYield = (uint256(position.principal) * uint256(vault.apr) * timeElapsed) / (10000 * 365 days);
  ```

- Found in src/pools/v3/RotatingPool.sol [Line: 450](../../packages/contracts/src/pools/v3/RotatingPool.sol#L450)

  ```solidity
          uint256 feeAmount = (yieldAmount * performanceFee) / 10000;
  ```

- Found in src/pools/v3/RotatingPool.sol [Line: 465](../../packages/contracts/src/pools/v3/RotatingPool.sol#L465)

  ```solidity
                          feeAmount = (yieldAmount * performanceFee) / 10000;
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 392](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L392)

  ```solidity
          return (positions[_user].shares * 10000) / totalShares;
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 416](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L416)

  ```solidity
          apy = (totalGainsValue * 10000) / totalMusdDeposited;
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 497](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L497)

  ```solidity
          feeAmount = (pendingCollateral * performanceFee) / 10000;
  ```

</details>

## L-5: Event is missing `indexed` fields

Index event fields make the field more quickly accessible to off-chain tools that parse events. However, note that each index field costs extra gas during emission, so it's not necessarily best to index the maximum allowed per event (three fields). Each event should use three indexed fields if there are three or more fields, and gas usage is not particularly of concern for the events in question. If there are fewer than three fields, all of the fields should be indexed.

<details><summary>97 Found Instances</summary>

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 116](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L116)

  ```solidity
      event TargetLtvUpdated(uint256 oldLtv, uint256 newLtv);
  ```

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 117](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L117)

  ```solidity
      event MaxFeeUpdated(uint256 oldFee, uint256 newFee);
  ```

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 118](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L118)

  ```solidity
      event EmergencyModeUpdated(bool enabled);
  ```

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 119](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L119)

  ```solidity
      event PriceConfigUpdated(uint256 minPrice, uint256 maxPrice, uint256 staleness, uint256 maxDeviation);
  ```

- Found in src/integrations/v3/YieldAggregatorV3.sol [Line: 89](../../packages/contracts/src/integrations/v3/YieldAggregatorV3.sol#L89)

  ```solidity
      event EmergencyModeUpdated(bool enabled);
  ```

- Found in src/interfaces/IMezoBorrowerOperations.sol [Line: 14](../../packages/contracts/src/interfaces/IMezoBorrowerOperations.sol#L14)

  ```solidity
      event TroveCreated(address indexed _borrower, uint arrayIndex);
  ```

- Found in src/interfaces/IMezoBorrowerOperations.sol [Line: 15](../../packages/contracts/src/interfaces/IMezoBorrowerOperations.sol#L15)

  ```solidity
      event TroveUpdated(
  ```

- Found in src/interfaces/IMezoBorrowerOperations.sol [Line: 21](../../packages/contracts/src/interfaces/IMezoBorrowerOperations.sol#L21)

  ```solidity
      event MUSDBorrowingFeePaid(address indexed _borrower, uint _MUSDBorrowingFee);
  ```

- Found in src/interfaces/IMezoIntegration.sol [Line: 16](../../packages/contracts/src/interfaces/IMezoIntegration.sol#L16)

  ```solidity
      event BTCDeposited(address indexed user, uint256 btcAmount, uint256 musdMinted);
  ```

- Found in src/interfaces/IMezoIntegration.sol [Line: 24](../../packages/contracts/src/interfaces/IMezoIntegration.sol#L24)

  ```solidity
      event BTCWithdrawn(address indexed user, uint256 btcAmount, uint256 musdBurned);
  ```

- Found in src/interfaces/IMezoPriceFeed.sol [Line: 15](../../packages/contracts/src/interfaces/IMezoPriceFeed.sol#L15)

  ```solidity
      event LastGoodPriceUpdated(uint _lastGoodPrice);
  ```

- Found in src/interfaces/IMezoPriceFeed.sol [Line: 16](../../packages/contracts/src/interfaces/IMezoPriceFeed.sol#L16)

  ```solidity
      event PriceFeedStatusChanged(Status newStatus);
  ```

- Found in src/interfaces/IMezoSortedTroves.sol [Line: 15](../../packages/contracts/src/interfaces/IMezoSortedTroves.sol#L15)

  ```solidity
      event NodeAdded(address indexed _id, uint _NICR);
  ```

- Found in src/interfaces/IMezoTroveManager.sol [Line: 15](../../packages/contracts/src/interfaces/IMezoTroveManager.sol#L15)

  ```solidity
      event TroveLiquidated(
  ```

- Found in src/interfaces/IMezoTroveManager.sol [Line: 22](../../packages/contracts/src/interfaces/IMezoTroveManager.sol#L22)

  ```solidity
      event TroveUpdated(
  ```

- Found in src/interfaces/IMezoTroveManager.sol [Line: 29](../../packages/contracts/src/interfaces/IMezoTroveManager.sol#L29)

  ```solidity
      event Redemption(
  ```

- Found in src/interfaces/IMezoTroveManager.sol [Line: 36](../../packages/contracts/src/interfaces/IMezoTroveManager.sol#L36)

  ```solidity
      event SystemSnapshotsUpdated(uint _totalStakesSnapshot, uint _totalCollateralSnapshot);
  ```

- Found in src/interfaces/IMezoTroveManager.sol [Line: 38](../../packages/contracts/src/interfaces/IMezoTroveManager.sol#L38)

  ```solidity
      event LTermsUpdated(uint _L_BTC, uint _L_MUSDDebt);
  ```

- Found in src/interfaces/IStabilityPoolStrategy.sol [Line: 25](../../packages/contracts/src/interfaces/IStabilityPoolStrategy.sol#L25)

  ```solidity
      event Deposited(
  ```

- Found in src/interfaces/IStabilityPoolStrategy.sol [Line: 32](../../packages/contracts/src/interfaces/IStabilityPoolStrategy.sol#L32)

  ```solidity
      event Withdrawn(
  ```

- Found in src/interfaces/IStabilityPoolStrategy.sol [Line: 39](../../packages/contracts/src/interfaces/IStabilityPoolStrategy.sol#L39)

  ```solidity
      event CollateralGainsClaimed(
  ```

- Found in src/interfaces/IYieldAggregator.sol [Line: 48](../../packages/contracts/src/interfaces/IYieldAggregator.sol#L48)

  ```solidity
      event YieldDeposited(
  ```

- Found in src/interfaces/IYieldAggregator.sol [Line: 58](../../packages/contracts/src/interfaces/IYieldAggregator.sol#L58)

  ```solidity
      event YieldWithdrawn(
  ```

- Found in src/interfaces/IYieldAggregator.sol [Line: 68](../../packages/contracts/src/interfaces/IYieldAggregator.sol#L68)

  ```solidity
      event YieldClaimed(
  ```

- Found in src/interfaces/IYieldAggregator.sol [Line: 76](../../packages/contracts/src/interfaces/IYieldAggregator.sol#L76)

  ```solidity
      event YieldCompounded(
  ```

- Found in src/interfaces/IYieldAggregator.sol [Line: 84](../../packages/contracts/src/interfaces/IYieldAggregator.sol#L84)

  ```solidity
      event VaultAdded(
  ```

- Found in src/interfaces/IYieldAggregator.sol [Line: 93](../../packages/contracts/src/interfaces/IYieldAggregator.sol#L93)

  ```solidity
      event VaultUpdated(
  ```

- Found in src/libraries/Events.sol [Line: 23](../../packages/contracts/src/libraries/Events.sol#L23)

  ```solidity
      event Deposited(
  ```

- Found in src/libraries/Events.sol [Line: 38](../../packages/contracts/src/libraries/Events.sol#L38)

  ```solidity
      event PartialWithdrawn(
  ```

- Found in src/libraries/Events.sol [Line: 52](../../packages/contracts/src/libraries/Events.sol#L52)

  ```solidity
      event FullWithdrawn(
  ```

- Found in src/libraries/Events.sol [Line: 71](../../packages/contracts/src/libraries/Events.sol#L71)

  ```solidity
      event YieldClaimed(
  ```

- Found in src/libraries/Events.sol [Line: 86](../../packages/contracts/src/libraries/Events.sol#L86)

  ```solidity
      event AutoCompounded(
  ```

- Found in src/libraries/Events.sol [Line: 98](../../packages/contracts/src/libraries/Events.sol#L98)

  ```solidity
      event AutoCompoundToggled(
  ```

- Found in src/libraries/Events.sol [Line: 110](../../packages/contracts/src/libraries/Events.sol#L110)

  ```solidity
      event YieldDeposited(
  ```

- Found in src/libraries/Events.sol [Line: 124](../../packages/contracts/src/libraries/Events.sol#L124)

  ```solidity
      event YieldWithdrawn(
  ```

- Found in src/libraries/Events.sol [Line: 136](../../packages/contracts/src/libraries/Events.sol#L136)

  ```solidity
      event YieldCompounded(
  ```

- Found in src/libraries/Events.sol [Line: 154](../../packages/contracts/src/libraries/Events.sol#L154)

  ```solidity
      event PoolCreated(
  ```

- Found in src/libraries/Events.sol [Line: 171](../../packages/contracts/src/libraries/Events.sol#L171)

  ```solidity
      event MemberJoined(
  ```

- Found in src/libraries/Events.sol [Line: 187](../../packages/contracts/src/libraries/Events.sol#L187)

  ```solidity
      event MemberLeft(
  ```

- Found in src/libraries/Events.sol [Line: 200](../../packages/contracts/src/libraries/Events.sol#L200)

  ```solidity
      event PoolStatusUpdated(
  ```

- Found in src/libraries/Events.sol [Line: 210](../../packages/contracts/src/libraries/Events.sol#L210)

  ```solidity
      event PoolClosed(
  ```

- Found in src/libraries/Events.sol [Line: 225](../../packages/contracts/src/libraries/Events.sol#L225)

  ```solidity
      event VaultAdded(
  ```

- Found in src/libraries/Events.sol [Line: 237](../../packages/contracts/src/libraries/Events.sol#L237)

  ```solidity
      event VaultUpdated(
  ```

- Found in src/libraries/Events.sol [Line: 253](../../packages/contracts/src/libraries/Events.sol#L253)

  ```solidity
      event BTCDeposited(
  ```

- Found in src/libraries/Events.sol [Line: 265](../../packages/contracts/src/libraries/Events.sol#L265)

  ```solidity
      event BTCWithdrawn(
  ```

- Found in src/libraries/Events.sol [Line: 281](../../packages/contracts/src/libraries/Events.sol#L281)

  ```solidity
      event ReferralRecorded(
  ```

- Found in src/libraries/Events.sol [Line: 292](../../packages/contracts/src/libraries/Events.sol#L292)

  ```solidity
      event ReferralRewardsClaimed(
  ```

- Found in src/libraries/Events.sol [Line: 305](../../packages/contracts/src/libraries/Events.sol#L305)

  ```solidity
      event EmergencyModeUpdated(bool enabled);
  ```

- Found in src/libraries/Events.sol [Line: 312](../../packages/contracts/src/libraries/Events.sol#L312)

  ```solidity
      event PerformanceFeeUpdated(uint256 oldFee, uint256 newFee);
  ```

- Found in src/libraries/Events.sol [Line: 319](../../packages/contracts/src/libraries/Events.sol#L319)

  ```solidity
      event ReferralBonusUpdated(uint256 oldBonus, uint256 newBonus);
  ```

- Found in src/libraries/Events.sol [Line: 336](../../packages/contracts/src/libraries/Events.sol#L336)

  ```solidity
      event TargetLtvUpdated(uint256 oldLtv, uint256 newLtv);
  ```

- Found in src/libraries/Events.sol [Line: 343](../../packages/contracts/src/libraries/Events.sol#L343)

  ```solidity
      event MaxFeeUpdated(uint256 oldFee, uint256 newFee);
  ```

- Found in src/libraries/Events.sol [Line: 350](../../packages/contracts/src/libraries/Events.sol#L350)

  ```solidity
      event PaymentAllocated(
  ```

- Found in src/libraries/Events.sol [Line: 360](../../packages/contracts/src/libraries/Events.sol#L360)

  ```solidity
      event PaymentWithdrawn(
  ```

- Found in src/pools/v3/BasePoolV3.sol [Line: 51](../../packages/contracts/src/pools/v3/BasePoolV3.sol#L51)

  ```solidity
      event PerformanceFeeUpdated(uint256 oldFee, uint256 newFee);
  ```

- Found in src/pools/v3/BasePoolV3.sol [Line: 52](../../packages/contracts/src/pools/v3/BasePoolV3.sol#L52)

  ```solidity
      event FeeCollectorUpdated(address oldCollector, address newCollector);
  ```

- Found in src/pools/v3/BasePoolV3.sol [Line: 53](../../packages/contracts/src/pools/v3/BasePoolV3.sol#L53)

  ```solidity
      event EmergencyModeUpdated(bool enabled);
  ```

- Found in src/pools/v3/BasePoolV3.sol [Line: 54](../../packages/contracts/src/pools/v3/BasePoolV3.sol#L54)

  ```solidity
      event FeesCollected(address indexed collector, uint256 amount);
  ```

- Found in src/pools/v3/CooperativePoolV3.sol [Line: 103](../../packages/contracts/src/pools/v3/CooperativePoolV3.sol#L103)

  ```solidity
      event PoolCreated(
  ```

- Found in src/pools/v3/CooperativePoolV3.sol [Line: 112](../../packages/contracts/src/pools/v3/CooperativePoolV3.sol#L112)

  ```solidity
      event MemberJoined(
  ```

- Found in src/pools/v3/CooperativePoolV3.sol [Line: 120](../../packages/contracts/src/pools/v3/CooperativePoolV3.sol#L120)

  ```solidity
      event MemberLeft(
  ```

- Found in src/pools/v3/CooperativePoolV3.sol [Line: 128](../../packages/contracts/src/pools/v3/CooperativePoolV3.sol#L128)

  ```solidity
      event PartialWithdrawal(
  ```

- Found in src/pools/v3/CooperativePoolV3.sol [Line: 136](../../packages/contracts/src/pools/v3/CooperativePoolV3.sol#L136)

  ```solidity
      event YieldClaimed(
  ```

- Found in src/pools/v3/CooperativePoolV3.sol [Line: 145](../../packages/contracts/src/pools/v3/CooperativePoolV3.sol#L145)

  ```solidity
      event PoolStatusUpdated(uint256 indexed poolId, PoolStatus newStatus);
  ```

- Found in src/pools/v3/CooperativePoolV3.sol [Line: 146](../../packages/contracts/src/pools/v3/CooperativePoolV3.sol#L146)

  ```solidity
      event PoolClosed(uint256 indexed poolId, uint256 finalBalance);
  ```

- Found in src/pools/v3/IndividualPoolV3.sol [Line: 87](../../packages/contracts/src/pools/v3/IndividualPoolV3.sol#L87)

  ```solidity
      event Deposited(
  ```

- Found in src/pools/v3/IndividualPoolV3.sol [Line: 95](../../packages/contracts/src/pools/v3/IndividualPoolV3.sol#L95)

  ```solidity
      event PartialWithdrawn(
  ```

- Found in src/pools/v3/IndividualPoolV3.sol [Line: 102](../../packages/contracts/src/pools/v3/IndividualPoolV3.sol#L102)

  ```solidity
      event YieldClaimed(
  ```

- Found in src/pools/v3/IndividualPoolV3.sol [Line: 110](../../packages/contracts/src/pools/v3/IndividualPoolV3.sol#L110)

  ```solidity
      event AutoCompounded(
  ```

- Found in src/pools/v3/IndividualPoolV3.sol [Line: 117](../../packages/contracts/src/pools/v3/IndividualPoolV3.sol#L117)

  ```solidity
      event FullWithdrawal(
  ```

- Found in src/pools/v3/IndividualPoolV3.sol [Line: 124](../../packages/contracts/src/pools/v3/IndividualPoolV3.sol#L124)

  ```solidity
      event ReferralRecorded(
  ```

- Found in src/pools/v3/IndividualPoolV3.sol [Line: 130](../../packages/contracts/src/pools/v3/IndividualPoolV3.sol#L130)

  ```solidity
      event ReferralRewardsClaimed(
  ```

- Found in src/pools/v3/IndividualPoolV3.sol [Line: 135](../../packages/contracts/src/pools/v3/IndividualPoolV3.sol#L135)

  ```solidity
      event AutoCompoundToggled(
  ```

- Found in src/pools/v3/IndividualPoolV3.sol [Line: 140](../../packages/contracts/src/pools/v3/IndividualPoolV3.sol#L140)

  ```solidity
      event ReferralBonusUpdated(uint256 oldBonus, uint256 newBonus);
  ```

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 132](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L132)

  ```solidity
      event RoundCreated(
  ```

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 139](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L139)

  ```solidity
      event TicketsPurchased(
  ```

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 148](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L148)

  ```solidity
      event CommitSubmitted(uint256 indexed roundId, bytes32 commitment);
  ```

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 149](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L149)

  ```solidity
      event SeedRevealed(uint256 indexed roundId, uint256 seed);
  ```

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 151](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L151)

  ```solidity
      event WinnerSelected(
  ```

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 158](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L158)

  ```solidity
      event PrizeClaimed(
  ```

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 165](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L165)

  ```solidity
      event RoundCancelled(uint256 indexed roundId, string reason);
  ```

- Found in src/pools/v3/RotatingPool.sol [Line: 168](../../packages/contracts/src/pools/v3/RotatingPool.sol#L168)

  ```solidity
      event PoolCreated(
  ```

- Found in src/pools/v3/RotatingPool.sol [Line: 177](../../packages/contracts/src/pools/v3/RotatingPool.sol#L177)

  ```solidity
      event MemberJoined(
  ```

- Found in src/pools/v3/RotatingPool.sol [Line: 183](../../packages/contracts/src/pools/v3/RotatingPool.sol#L183)

  ```solidity
      event ContributionMade(
  ```

- Found in src/pools/v3/RotatingPool.sol [Line: 190](../../packages/contracts/src/pools/v3/RotatingPool.sol#L190)

  ```solidity
      event PayoutDistributed(
  ```

- Found in src/pools/v3/RotatingPool.sol [Line: 198](../../packages/contracts/src/pools/v3/RotatingPool.sol#L198)

  ```solidity
      event PeriodAdvanced(
  ```

- Found in src/pools/v3/RotatingPool.sol [Line: 203](../../packages/contracts/src/pools/v3/RotatingPool.sol#L203)

  ```solidity
      event PoolCompleted(
  ```

- Found in src/pools/v3/RotatingPool.sol [Line: 208](../../packages/contracts/src/pools/v3/RotatingPool.sol#L208)

  ```solidity
      event PoolCancelled(
  ```

- Found in src/proxy/SimpleProxy.sol [Line: 15](../../packages/contracts/src/proxy/SimpleProxy.sol#L15)

  ```solidity
      event EtherWithdrawn(address indexed to, uint256 amount);
  ```

- Found in src/proxy/UUPSProxy.sol [Line: 37](../../packages/contracts/src/proxy/UUPSProxy.sol#L37)

  ```solidity
      event AdminChanged(address previousAdmin, address newAdmin);
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 107](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L107)

  ```solidity
      event Deposited(
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 114](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L114)

  ```solidity
      event Withdrawn(
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 121](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L121)

  ```solidity
      event CollateralGainsClaimed(
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 128](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L128)

  ```solidity
      event CollateralGainsHarvested(
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 134](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L134)

  ```solidity
      event PerformanceFeeUpdated(uint256 oldFee, uint256 newFee);
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 138](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L138)

  ```solidity
      event EmergencyModeToggled(bool enabled);
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 140](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L140)

  ```solidity
      event PositionRebalanced(address indexed user, uint256 newShares);
  ```

</details>

## L-6: The `nonReentrant` `modifier` should occur before all other modifiers

This is a best-practice to protect against reentrancy in other modifiers.

<details><summary>3 Found Instances</summary>

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 392](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L392)

  ```solidity
          nonReentrant
  ```

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 688](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L688)

  ```solidity
      function forceComplete(uint256 roundId) external onlyOwner nonReentrant {
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 333](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L333)

  ```solidity
          nonReentrant
  ```

</details>

## L-7: PUSH0 is not supported by all chains

Solc compiler version 0.8.20 switches the default target EVM version to Shanghai, which means that the generated bytecode will include PUSH0 opcodes. Be sure to select the appropriate EVM version in case you intend to deploy on a chain other than mainnet like L2 chains that may not support PUSH0, otherwise deployment of your contracts will fail.

<details><summary>1 Found Instances</summary>

- Found in src/Counter.sol [Line: 2](../../packages/contracts/src/Counter.sol#L2)

  ```solidity
  pragma solidity ^0.8.13;
  ```

</details>

## L-8: Modifiers invoked only once can be shoe-horned into the function

<details><summary>2 Found Instances</summary>

- Found in src/pools/v3/BasePoolV3.sol [Line: 90](../../packages/contracts/src/pools/v3/BasePoolV3.sol#L90)

  ```solidity
      modifier notInEmergency() {
  ```

- Found in src/pools/v3/RotatingPool.sol [Line: 244](../../packages/contracts/src/pools/v3/RotatingPool.sol#L244)

  ```solidity
      modifier noFlashLoan() {
  ```

</details>

## L-9: Empty Block

Consider removing empty blocks.

<details><summary>1 Found Instances</summary>

- Found in src/integrations/v3/YieldAggregatorV3.sol [Line: 619](../../packages/contracts/src/integrations/v3/YieldAggregatorV3.sol#L619)

  ```solidity
      function _authorizeUpgrade(address newImplementation) internal override onlyOwner {}
  ```

</details>

## L-10: Large literal values multiples of 10000 can be replaced with scientific notation

Use `e` notation, for example: `1e18`, instead of its full numeric value.

<details><summary>15 Found Instances</summary>

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 102](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L102)

  ```solidity
      uint256 public constant BPS = 10000;
  ```

- Found in src/integrations/base/BaseMezoIntegration.sol [Line: 106](../../packages/contracts/src/integrations/base/BaseMezoIntegration.sol#L106)

  ```solidity
      uint256 public constant DEFAULT_MAX_PRICE = 1_000_000 * 1e18;  // $1,000,000
  ```

- Found in src/integrations/base/PriceValidator.sol [Line: 36](../../packages/contracts/src/integrations/base/PriceValidator.sol#L36)

  ```solidity
      uint256 internal constant BPS = 10000;
  ```

- Found in src/integrations/v3/YieldAggregatorV3.sol [Line: 428](../../packages/contracts/src/integrations/v3/YieldAggregatorV3.sol#L428)

  ```solidity
          expectedYield = (amount * uint256(vault.apr) * timeInSeconds) / (10000 * 365 days);
  ```

- Found in src/integrations/v3/YieldAggregatorV3.sol [Line: 529](../../packages/contracts/src/integrations/v3/YieldAggregatorV3.sol#L529)

  ```solidity
          pendingYield = (uint256(position.principal) * uint256(vault.apr) * timeElapsed) / (10000 * 365 days);
  ```

- Found in src/libraries/YieldCalculations.sol [Line: 12](../../packages/contracts/src/libraries/YieldCalculations.sol#L12)

  ```solidity
      uint256 public constant BPS_DENOMINATOR = 10000;
  ```

- Found in src/pools/v3/BasePoolV3.sol [Line: 33](../../packages/contracts/src/pools/v3/BasePoolV3.sol#L33)

  ```solidity
      uint256 public constant FEE_DENOMINATOR = 10000;
  ```

- Found in src/pools/v3/IndividualPoolV3.sol [Line: 69](../../packages/contracts/src/pools/v3/IndividualPoolV3.sol#L69)

  ```solidity
      uint256 public constant MAX_DEPOSIT = 100_000 ether;
  ```

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 108](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L108)

  ```solidity
      uint256 public constant MAX_TICKET_PRICE = 10_000 ether;    // 10,000 MUSD maximum
  ```

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 114](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L114)

  ```solidity
      uint256 public constant BASIS_POINTS = 10000;
  ```

- Found in src/pools/v3/RotatingPool.sol [Line: 450](../../packages/contracts/src/pools/v3/RotatingPool.sol#L450)

  ```solidity
          uint256 feeAmount = (yieldAmount * performanceFee) / 10000;
  ```

- Found in src/pools/v3/RotatingPool.sol [Line: 465](../../packages/contracts/src/pools/v3/RotatingPool.sol#L465)

  ```solidity
                          feeAmount = (yieldAmount * performanceFee) / 10000;
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 392](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L392)

  ```solidity
          return (positions[_user].shares * 10000) / totalShares;
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 416](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L416)

  ```solidity
          apy = (totalGainsValue * 10000) / totalMusdDeposited;
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 497](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L497)

  ```solidity
          feeAmount = (pendingCollateral * performanceFee) / 10000;
  ```

</details>

## L-11: Internal functions called only once can be inlined

Instead of separating the logic into a separate function, consider inlining the logic into the calling function. This can reduce the number of function calls and improve readability.

<details><summary>6 Found Instances</summary>

- Found in src/integrations/base/PriceValidator.sol [Line: 48](../../packages/contracts/src/integrations/base/PriceValidator.sol#L48)

  ```solidity
      function validateBounds(
  ```

- Found in src/integrations/base/PriceValidator.sol [Line: 65](../../packages/contracts/src/integrations/base/PriceValidator.sol#L65)

  ```solidity
      function validateDeviation(
  ```

- Found in src/integrations/base/PriceValidator.sol [Line: 84](../../packages/contracts/src/integrations/base/PriceValidator.sol#L84)

  ```solidity
      function validateFreshness(
  ```

- Found in src/integrations/base/PriceValidator.sol [Line: 127](../../packages/contracts/src/integrations/base/PriceValidator.sol#L127)

  ```solidity
      function calculateDeviation(
  ```

- Found in src/integrations/base/PriceValidator.sol [Line: 170](../../packages/contracts/src/integrations/base/PriceValidator.sol#L170)

  ```solidity
      function calculateCollateralRatio(
  ```

- Found in src/libraries/YieldCalculations.sol [Line: 78](../../packages/contracts/src/libraries/YieldCalculations.sol#L78)

  ```solidity
      function calculatePerformanceFee(
  ```

</details>

## L-12: Inconsistency in declaring uint256/uint (or) int256/int variables within a contract. Use explicit size declarations (uint256 or int256).

Consider keeping the naming convention consistent in a given contract. Explicit size declarations are preferred (uint256, int256) over implicit ones (uint, int) to avoid confusion.

<details><summary>13 Found Instances</summary>

- Found in src/interfaces/IMezoPriceFeed.sol [Line: 15](../../packages/contracts/src/interfaces/IMezoPriceFeed.sol#L15)

  ```solidity
      event LastGoodPriceUpdated(uint _lastGoodPrice);
  ```

- Found in src/interfaces/IMezoPriceFeed.sol [Line: 42](../../packages/contracts/src/interfaces/IMezoPriceFeed.sol#L42)

  ```solidity
      function fetchPrice() external returns (uint);
  ```

- Found in src/interfaces/IMezoPriceFeed.sol [Line: 53](../../packages/contracts/src/interfaces/IMezoPriceFeed.sol#L53)

  ```solidity
      function lastGoodPrice() external view returns (uint);
  ```

- Found in src/interfaces/IMezoPriceFeed.sol [Line: 71](../../packages/contracts/src/interfaces/IMezoPriceFeed.sol#L71)

  ```solidity
      function maxPriceDeviation() external view returns (uint);
  ```

- Found in src/interfaces/IMezoPriceFeed.sol [Line: 77](../../packages/contracts/src/interfaces/IMezoPriceFeed.sol#L77)

  ```solidity
      function priceStaleThreshold() external view returns (uint);
  ```

- Found in src/interfaces/IMezoPriceFeed.sol [Line: 95](../../packages/contracts/src/interfaces/IMezoPriceFeed.sol#L95)

  ```solidity
      function minPriceChangeForUpdate() external view returns (uint);
  ```

- Found in src/interfaces/IMezoPriceFeed.sol [Line: 149](../../packages/contracts/src/interfaces/IMezoPriceFeed.sol#L149)

  ```solidity
      function isPriceValid(uint _price) external view returns (bool);
  ```

- Found in src/interfaces/IMezoPriceFeed.sol [Line: 156](../../packages/contracts/src/interfaces/IMezoPriceFeed.sol#L156)

  ```solidity
      function isPriceFresh(uint _timestamp) external view returns (bool);
  ```

- Found in src/interfaces/IMezoPriceFeed.sol [Line: 164](../../packages/contracts/src/interfaces/IMezoPriceFeed.sol#L164)

  ```solidity
      function calculatePriceDeviation(uint _price1, uint _price2) external pure returns (uint);
  ```

- Found in src/interfaces/IMezoPriceFeed.sol [Line: 176](../../packages/contracts/src/interfaces/IMezoPriceFeed.sol#L176)

  ```solidity
      function setPrice(uint _price) external;
  ```

- Found in src/interfaces/IMezoSortedTroves.sol [Line: 15](../../packages/contracts/src/interfaces/IMezoSortedTroves.sol#L15)

  ```solidity
      event NodeAdded(address indexed _id, uint _NICR);
  ```

</details>

## L-13: Unused Custom Error

it is recommended that the definition be removed when custom error is unused

<details><summary>70 Found Instances</summary>

- Found in src/integrations/v3/YieldAggregatorV3.sol [Line: 96](../../packages/contracts/src/integrations/v3/YieldAggregatorV3.sol#L96)

  ```solidity
      error InvalidVault();
  ```

- Found in src/integrations/v3/YieldAggregatorV3.sol [Line: 104](../../packages/contracts/src/integrations/v3/YieldAggregatorV3.sol#L104)

  ```solidity
      error FlashLoanDetected();
  ```

- Found in src/interfaces/IMezoPriceFeed.sol [Line: 194](../../packages/contracts/src/interfaces/IMezoPriceFeed.sol#L194)

  ```solidity
      error PriceIsStale();
  ```

- Found in src/interfaces/IMezoPriceFeed.sol [Line: 195](../../packages/contracts/src/interfaces/IMezoPriceFeed.sol#L195)

  ```solidity
      error PriceIsInvalid();
  ```

- Found in src/interfaces/IMezoPriceFeed.sol [Line: 196](../../packages/contracts/src/interfaces/IMezoPriceFeed.sol#L196)

  ```solidity
      error PriceDeviationTooHigh();
  ```

- Found in src/interfaces/IMezoPriceFeed.sol [Line: 197](../../packages/contracts/src/interfaces/IMezoPriceFeed.sol#L197)

  ```solidity
      error OracleNotWorking();
  ```

- Found in src/interfaces/IMezoPriceFeed.sol [Line: 198](../../packages/contracts/src/interfaces/IMezoPriceFeed.sol#L198)

  ```solidity
      error PriceFeedPaused();
  ```

- Found in src/interfaces/IMezoPriceFeed.sol [Line: 199](../../packages/contracts/src/interfaces/IMezoPriceFeed.sol#L199)

  ```solidity
      error InvalidPriceValue();
  ```

- Found in src/interfaces/IMezoPriceFeed.sol [Line: 200](../../packages/contracts/src/interfaces/IMezoPriceFeed.sol#L200)

  ```solidity
      error UnauthorizedAccess();
  ```

- Found in src/interfaces/IMezoSortedTroves.sol [Line: 201](../../packages/contracts/src/interfaces/IMezoSortedTroves.sol#L201)

  ```solidity
      error SortedTroves__CallerNotAuthorized();
  ```

- Found in src/interfaces/IMezoSortedTroves.sol [Line: 202](../../packages/contracts/src/interfaces/IMezoSortedTroves.sol#L202)

  ```solidity
      error SortedTroves__TroveAlreadyExists();
  ```

- Found in src/interfaces/IMezoSortedTroves.sol [Line: 203](../../packages/contracts/src/interfaces/IMezoSortedTroves.sol#L203)

  ```solidity
      error SortedTroves__TroveNotFound();
  ```

- Found in src/interfaces/IMezoSortedTroves.sol [Line: 204](../../packages/contracts/src/interfaces/IMezoSortedTroves.sol#L204)

  ```solidity
      error SortedTroves__InvalidHints();
  ```

- Found in src/interfaces/IMezoSortedTroves.sol [Line: 205](../../packages/contracts/src/interfaces/IMezoSortedTroves.sol#L205)

  ```solidity
      error SortedTroves__ListIsFull();
  ```

- Found in src/interfaces/IMezoTroveManager.sol [Line: 347](../../packages/contracts/src/interfaces/IMezoTroveManager.sol#L347)

  ```solidity
      error TroveNotActive();
  ```

- Found in src/interfaces/IMezoTroveManager.sol [Line: 348](../../packages/contracts/src/interfaces/IMezoTroveManager.sol#L348)

  ```solidity
      error TroveNotLiquidatable();
  ```

- Found in src/interfaces/IMezoTroveManager.sol [Line: 349](../../packages/contracts/src/interfaces/IMezoTroveManager.sol#L349)

  ```solidity
      error InsufficientMUSDBalance();
  ```

- Found in src/interfaces/IMezoTroveManager.sol [Line: 350](../../packages/contracts/src/interfaces/IMezoTroveManager.sol#L350)

  ```solidity
      error SystemInRecoveryMode();
  ```

- Found in src/interfaces/IMezoTroveManager.sol [Line: 351](../../packages/contracts/src/interfaces/IMezoTroveManager.sol#L351)

  ```solidity
      error RedemptionAmountTooLow();
  ```

- Found in src/interfaces/IMezoTroveManager.sol [Line: 352](../../packages/contracts/src/interfaces/IMezoTroveManager.sol#L352)

  ```solidity
      error UnauthorizedAccess();
  ```

- Found in src/interfaces/IMezoTroveManager.sol [Line: 353](../../packages/contracts/src/interfaces/IMezoTroveManager.sol#L353)

  ```solidity
      error InvalidParameters();
  ```

- Found in src/libraries/Errors.sol [Line: 16](../../packages/contracts/src/libraries/Errors.sol#L16)

  ```solidity
      error ZeroAddress();
  ```

- Found in src/libraries/Errors.sol [Line: 19](../../packages/contracts/src/libraries/Errors.sol#L19)

  ```solidity
      error InvalidAmount();
  ```

- Found in src/libraries/Errors.sol [Line: 22](../../packages/contracts/src/libraries/Errors.sol#L22)

  ```solidity
      error Unauthorized();
  ```

- Found in src/libraries/Errors.sol [Line: 25](../../packages/contracts/src/libraries/Errors.sol#L25)

  ```solidity
      error ContractPaused();
  ```

- Found in src/libraries/Errors.sol [Line: 28](../../packages/contracts/src/libraries/Errors.sol#L28)

  ```solidity
      error LengthMismatch();
  ```

- Found in src/libraries/Errors.sol [Line: 35](../../packages/contracts/src/libraries/Errors.sol#L35)

  ```solidity
      error BelowMinimumDeposit();
  ```

- Found in src/libraries/Errors.sol [Line: 38](../../packages/contracts/src/libraries/Errors.sol#L38)

  ```solidity
      error ExceedsMaximumDeposit();
  ```

- Found in src/libraries/Errors.sol [Line: 41](../../packages/contracts/src/libraries/Errors.sol#L41)

  ```solidity
      error InsufficientBalance();
  ```

- Found in src/libraries/Errors.sol [Line: 44](../../packages/contracts/src/libraries/Errors.sol#L44)

  ```solidity
      error NoActiveDeposit();
  ```

- Found in src/libraries/Errors.sol [Line: 47](../../packages/contracts/src/libraries/Errors.sol#L47)

  ```solidity
      error BelowMinimumWithdrawal();
  ```

- Found in src/libraries/Errors.sol [Line: 54](../../packages/contracts/src/libraries/Errors.sol#L54)

  ```solidity
      error FlashLoanDetected();
  ```

- Found in src/libraries/Errors.sol [Line: 57](../../packages/contracts/src/libraries/Errors.sol#L57)

  ```solidity
      error SameBlockInteraction();
  ```

- Found in src/libraries/Errors.sol [Line: 60](../../packages/contracts/src/libraries/Errors.sol#L60)

  ```solidity
      error ContractNotWhitelisted();
  ```

- Found in src/libraries/Errors.sol [Line: 67](../../packages/contracts/src/libraries/Errors.sol#L67)

  ```solidity
      error InvalidPriceData();
  ```

- Found in src/libraries/Errors.sol [Line: 70](../../packages/contracts/src/libraries/Errors.sol#L70)

  ```solidity
      error StalePriceData();
  ```

- Found in src/libraries/Errors.sol [Line: 73](../../packages/contracts/src/libraries/Errors.sol#L73)

  ```solidity
      error ExcessivePriceDeviation();
  ```

- Found in src/libraries/Errors.sol [Line: 76](../../packages/contracts/src/libraries/Errors.sol#L76)

  ```solidity
      error PriceFeedFailure();
  ```

- Found in src/libraries/Errors.sol [Line: 83](../../packages/contracts/src/libraries/Errors.sol#L83)

  ```solidity
      error PoolNotFound();
  ```

- Found in src/libraries/Errors.sol [Line: 86](../../packages/contracts/src/libraries/Errors.sol#L86)

  ```solidity
      error PoolFull();
  ```

- Found in src/libraries/Errors.sol [Line: 89](../../packages/contracts/src/libraries/Errors.sol#L89)

  ```solidity
      error PoolNotAccepting();
  ```

- Found in src/libraries/Errors.sol [Line: 92](../../packages/contracts/src/libraries/Errors.sol#L92)

  ```solidity
      error AlreadyMember();
  ```

- Found in src/libraries/Errors.sol [Line: 95](../../packages/contracts/src/libraries/Errors.sol#L95)

  ```solidity
      error NotMember();
  ```

- Found in src/libraries/Errors.sol [Line: 98](../../packages/contracts/src/libraries/Errors.sol#L98)

  ```solidity
      error ContributionTooLow();
  ```

- Found in src/libraries/Errors.sol [Line: 101](../../packages/contracts/src/libraries/Errors.sol#L101)

  ```solidity
      error ContributionTooHigh();
  ```

- Found in src/libraries/Errors.sol [Line: 108](../../packages/contracts/src/libraries/Errors.sol#L108)

  ```solidity
      error NoYieldAvailable();
  ```

- Found in src/libraries/Errors.sol [Line: 111](../../packages/contracts/src/libraries/Errors.sol#L111)

  ```solidity
      error VaultInactive();
  ```

- Found in src/libraries/Errors.sol [Line: 114](../../packages/contracts/src/libraries/Errors.sol#L114)

  ```solidity
      error VaultNotFound();
  ```

- Found in src/libraries/Errors.sol [Line: 117](../../packages/contracts/src/libraries/Errors.sol#L117)

  ```solidity
      error VaultAlreadyExists();
  ```

- Found in src/libraries/Errors.sol [Line: 120](../../packages/contracts/src/libraries/Errors.sol#L120)

  ```solidity
      error TooManyVaults();
  ```

- Found in src/libraries/Errors.sol [Line: 127](../../packages/contracts/src/libraries/Errors.sol#L127)

  ```solidity
      error UnhealthyPosition();
  ```

- Found in src/libraries/Errors.sol [Line: 130](../../packages/contracts/src/libraries/Errors.sol#L130)

  ```solidity
      error InsufficientCollateral();
  ```

- Found in src/libraries/Errors.sol [Line: 133](../../packages/contracts/src/libraries/Errors.sol#L133)

  ```solidity
      error TroveNotExists();
  ```

- Found in src/libraries/Errors.sol [Line: 140](../../packages/contracts/src/libraries/Errors.sol#L140)

  ```solidity
      error ExcessiveFee();
  ```

- Found in src/libraries/Errors.sol [Line: 143](../../packages/contracts/src/libraries/Errors.sol#L143)

  ```solidity
      error InvalidParameter();
  ```

- Found in src/libraries/Errors.sol [Line: 146](../../packages/contracts/src/libraries/Errors.sol#L146)

  ```solidity
      error InvalidState();
  ```

- Found in src/libraries/Errors.sol [Line: 153](../../packages/contracts/src/libraries/Errors.sol#L153)

  ```solidity
      error SelfReferralNotAllowed();
  ```

- Found in src/libraries/Errors.sol [Line: 156](../../packages/contracts/src/libraries/Errors.sol#L156)

  ```solidity
      error NoReferralRewards();
  ```

- Found in src/libraries/Errors.sol [Line: 159](../../packages/contracts/src/libraries/Errors.sol#L159)

  ```solidity
      error InvalidReferralCode();
  ```

- Found in src/pools/v3/CooperativePoolV3.sol [Line: 159](../../packages/contracts/src/pools/v3/CooperativePoolV3.sol#L159)

  ```solidity
      error AlreadyMember();
  ```

- Found in src/pools/v3/CooperativePoolV3.sol [Line: 163](../../packages/contracts/src/pools/v3/CooperativePoolV3.sol#L163)

  ```solidity
      error PoolNotActive();
  ```

- Found in src/pools/v3/CooperativePoolV3.sol [Line: 165](../../packages/contracts/src/pools/v3/CooperativePoolV3.sol#L165)

  ```solidity
      error InsufficientPoolSize();
  ```

- Found in src/pools/v3/CooperativePoolV3.sol [Line: 166](../../packages/contracts/src/pools/v3/CooperativePoolV3.sol#L166)

  ```solidity
      error FlashLoanDetected();
  ```

- Found in src/pools/v3/IndividualPoolV3.sol [Line: 148](../../packages/contracts/src/pools/v3/IndividualPoolV3.sol#L148)

  ```solidity
      error InsufficientBalance();
  ```

- Found in src/pools/v3/IndividualPoolV3.sol [Line: 155](../../packages/contracts/src/pools/v3/IndividualPoolV3.sol#L155)

  ```solidity
      error FlashLoanDetected();
  ```

- Found in src/pools/v3/IndividualPoolV3.sol [Line: 156](../../packages/contracts/src/pools/v3/IndividualPoolV3.sol#L156)

  ```solidity
      error SelfReferralNotAllowed();
  ```

- Found in src/pools/v3/LotteryPoolV3.sol [Line: 180](../../packages/contracts/src/pools/v3/LotteryPoolV3.sol#L180)

  ```solidity
      error InsufficientBalance();
  ```

- Found in src/pools/v3/RotatingPool.sol [Line: 232](../../packages/contracts/src/pools/v3/RotatingPool.sol#L232)

  ```solidity
      error PoolNotCompleted();
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 148](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L148)

  ```solidity
      error InsufficientBalance();
  ```

- Found in src/strategies/StabilityPoolStrategy.sol [Line: 154](../../packages/contracts/src/strategies/StabilityPoolStrategy.sol#L154)

  ```solidity
      error NoCollateralToHarvest();
  ```

</details>
